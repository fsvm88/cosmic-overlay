diff '--color=auto' -Nuar cosmic-session-1.0.0_beta5.orig/src/main.rs cosmic-session-1.0.0_beta5/src/main.rs
--- cosmic-session-1.0.0_beta5.orig/src/main.rs	2025-10-30 01:11:57.000000000 +0000
+++ cosmic-session-1.0.0_beta5/src/main.rs	2025-11-05 00:11:33.957521000 +0000
@@ -24,8 +24,9 @@
 #[cfg(feature = "autostart")]
 use std::process::{Command, Stdio};
 use std::{borrow::Cow, env, os::fd::AsRawFd, sync::Arc};
+use systemd::is_systemd_used;
 #[cfg(feature = "systemd")]
-use systemd::{get_systemd_env, is_systemd_used, spawn_scope};
+use systemd::{get_systemd_env, spawn_scope};
 use tokio::{
 	sync::{
 		Mutex,
diff '--color=auto' -Nuar cosmic-session-1.0.0_beta5.orig/src/systemd.rs cosmic-session-1.0.0_beta5/src/systemd.rs
--- cosmic-session-1.0.0_beta5.orig/src/systemd.rs	2025-10-30 01:11:57.000000000 +0000
+++ cosmic-session-1.0.0_beta5/src/systemd.rs	2025-11-05 00:12:19.209959909 +0000
@@ -52,10 +52,15 @@
 
 /// Determine if systemd is used as the init system. This should work on all
 /// linux distributions.
+#[cfg(feature = "systemd")]
 pub fn is_systemd_used() -> &'static bool {
 	static IS_SYSTEMD_USED: OnceLock<bool> = OnceLock::new();
 	IS_SYSTEMD_USED.get_or_init(|| Path::new("/run/systemd/system").exists())
 }
+#[cfg(not(feature = "systemd"))]
+pub fn is_systemd_used() -> &'static bool {
+	&false
+}
 
 #[cfg(feature = "systemd")]
 pub async fn get_systemd_env() -> Result<Vec<EnvVar>, zbus::Error> {
